# Full-Stack Template (å…¨æ ˆå¼€å‘æ¨¡æ¿)

è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ã€å¼€ç®±å³ç”¨çš„å…¨æ ˆé¡¹ç›®æ¨¡æ¿ï¼Œé›†æˆäº† Python (FastAPI) åç«¯å’Œ Vue.js å‰ç«¯ã€‚

é¡¹ç›®é€šè¿‡ Docker Compose è¿›è¡Œå®¹å™¨åŒ–ç¼–æ’ï¼Œå®ç°äº†å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²çš„ç»Ÿä¸€ç®¡ç†ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå¯åŠ¨æ–°é¡¹ç›®ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å‰åç«¯åˆ†ç¦»**: æ¸…æ™°çš„ç›®å½•ç»“æ„ï¼Œä¾¿äºå›¢é˜Ÿåä½œã€‚
- **å®¹å™¨åŒ–**: ä½¿ç”¨ Docker å’Œ Docker Composeï¼Œå®ç°ä¸€é”®å¯åŠ¨å’Œç¯å¢ƒä¸€è‡´æ€§ã€‚
- **ç°ä»£æŠ€æœ¯æ ˆ**: åç«¯é‡‡ç”¨ FastAPIï¼Œå‰ç«¯é‡‡ç”¨ Vue 3ï¼Œå‡ä¸ºå½“å‰ä¸»æµçš„é«˜æ€§èƒ½æ¡†æ¶ã€‚
- **æ•°æ®åº“ç®¡ç†**: é›†æˆ SQLAlchemy ORM å’Œ Alembic æ•°æ®åº“è¿ç§»å·¥å…·ã€‚
- **å¼‚æ­¥æ”¯æŒ**: å…¨é¢æ‹¥æŠ±å¼‚æ­¥ç¼–ç¨‹ï¼Œä» Web æ¡†æ¶åˆ°æ•°æ®åº“æ“ä½œã€‚
- **é…ç½®çµæ´»**: é€šè¿‡ `.env` æ–‡ä»¶ç®¡ç†ç¯å¢ƒå˜é‡ï¼Œè½»æ¾åˆ‡æ¢é…ç½®ã€‚
- **API æ–‡æ¡£**: FastAPI è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼ API æ–‡æ¡£ (Swagger UI / ReDoc)ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| åˆ†ç±»         | æŠ€æœ¯                                                              |
|--------------|-------------------------------------------------------------------|
| **åç«¯**     | Python 3.12+, FastAPI, SQLAlchemy, Alembic, Uvicorn, Pydantic     |
| **å‰ç«¯**     | Vue 3, Vite, TypeScript, Pinia, Vue Router, Axios, Element Plus   |
| **æ•°æ®åº“**   | PostgreSQL, Redis (ç”¨äºç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—)                            |
| **å¯¹è±¡å­˜å‚¨**   | S3, COS                          |
| **åŒ…ç®¡ç†**   | `uv` (åç«¯), `pnpm` (å‰ç«¯)                                        |
| **å®¹å™¨åŒ–**   | Docker, Docker Compose                                            |
| **æµ‹è¯•**     | Pytest (åç«¯), Vitest (å‰ç«¯å•å…ƒæµ‹è¯•), Playwright (å‰ç«¯ E2E æµ‹è¯•)   |
| **ä»£ç è§„èŒƒ** | ESLint (å‰ç«¯)                                                     |

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ backend/         # FastAPI åç«¯åº”ç”¨
â”œâ”€â”€ docs/            # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ frontend/        # Vue.js å‰ç«¯åº”ç”¨
â”œâ”€â”€ scripts/         # æ„å»ºæˆ–éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ .env.example     # æ ¹ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ docker-compose.yml # Docker æœåŠ¡ç¼–æ’
```

## ğŸš€ å¿«é€Ÿå¼€å§‹ (æ¨è)

è¿™æ˜¯æœ€ç®€å•çš„å¯åŠ¨æ–¹å¼ï¼Œéœ€è¦ä½ çš„æœºå™¨ä¸Šå®‰è£…äº† Docker å’Œ Docker Composeã€‚

1.  **å…‹éš†é¡¹ç›®**
    ```bash
    git clone https://github.com/shaojielu/full-stack-template.git
    cd full-stack-template
    ```

2.  **åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶**
    é¡¹ç›®ä¾èµ– `.env` æ–‡ä»¶æ¥é…ç½®æœåŠ¡ã€‚è¯·æ ¹æ® `.env.example` åˆ›å»ºå¹¶è‡ªå®šä¹‰ä½ çš„é…ç½®ã€‚
    ```bash
    # å¤åˆ¶åç«¯ç¯å¢ƒå˜é‡æ–‡ä»¶
    cp backend/.env.example backend/.env
    ```
    > **æç¤º**: è¯·æ£€æŸ¥å¹¶æŒ‰éœ€ä¿®æ”¹ `backend/.env` æ–‡ä»¶ä¸­çš„ `POSTGRES_USER`, `POSTGRES_PASSWORD`, `SECRET_KEY` ç­‰å˜é‡ã€‚

3.  **å¯åŠ¨æœåŠ¡**
    ä½¿ç”¨ Docker Compose æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåç«¯ã€å‰ç«¯ã€æ•°æ®åº“ç­‰ï¼‰ã€‚
    ```bash
    docker-compose up --build
    ```
    `-d` å‚æ•°å¯ä»¥åœ¨åå°è¿è¡ŒæœåŠ¡: `docker-compose up --build -d`

4.  **è®¿é—®åº”ç”¨**
    æœåŠ¡å¯åŠ¨æˆåŠŸåï¼Œä½ å¯ä»¥è®¿é—®ï¼š
    - **å‰ç«¯é¡µé¢**: [http://localhost](http://localhost) (ç”± Nginx ä»£ç†)
    - **åç«¯ API æ–‡æ¡£**: [http://localhost:8000/docs](http://localhost:8000/docs)
    - **pgAdmin (æ•°æ®åº“ç®¡ç†)**: [http://localhost:8088](http://localhost:8088)

## ğŸ’» æœ¬åœ°å¼€å‘ (ä¸ä½¿ç”¨ Docker)

å¦‚æœä½ æƒ³ç‹¬ç«‹è¿è¡Œå‰ç«¯æˆ–åç«¯è¿›è¡Œå¼€å‘ã€‚

### åç«¯ (Backend)

1.  **è¿›å…¥ç›®å½•**
    ```bash
    cd backend
    ```
2.  **å®‰è£…ä¾èµ–**
    æ¨èä½¿ç”¨ `uv` (å®ƒä¼šè‡ªåŠ¨åˆ›å»º `.venv` è™šæ‹Ÿç¯å¢ƒ)ã€‚
    ```bash
    uv sync
    ```
3.  **é…ç½®ç¯å¢ƒ**
    å¤åˆ¶å¹¶ä¿®æ”¹ `.env` æ–‡ä»¶ã€‚
    ```bash
    cp .env.example .env
    ```
4.  **åº”ç”¨æ•°æ®åº“è¿ç§»**
    ç¡®ä¿æ•°æ®åº“æœåŠ¡å·²åœ¨è¿è¡Œï¼Œç„¶ååœ¨ `.env` ä¸­é…ç½®å¥½æ•°æ®åº“è¿æ¥ã€‚
    ```bash
    alembic upgrade head
    ```
5.  **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
    `uv` ä¼šå¯åŠ¨ä¸€ä¸ªæ”¯æŒçƒ­é‡è½½çš„æœåŠ¡å™¨ã€‚
    ```bash
    uvicorn app.api.main:app --reload --host 0.0.0.0 --port 8000
    ```

### å‰ç«¯ (Frontend)

1.  **è¿›å…¥ç›®å½•**
    ```bash
    cd frontend
    ```
2.  **å®‰è£…ä¾èµ–**
    æ¨èä½¿ç”¨ `pnpm`ã€‚
    ```bash
    pnpm install
    ```
3.  **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
    è¿™å°†å¯åŠ¨ä¸€ä¸ªæ”¯æŒçƒ­æ›´æ–°çš„å¼€å‘æœåŠ¡å™¨ã€‚
    ```bash
    pnpm dev
    ```
    è®¿é—®åœ°å€: [http://localhost:5173](http://localhost:5173)

## ğŸ—ƒï¸ æ•°æ®åº“è¿ç§»

æœ¬é¡¹ç›®ä½¿ç”¨ Alembic ç®¡ç†æ•°æ®åº“ç»“æ„å˜æ›´ã€‚

å½“ä½ ä¿®æ”¹äº† `backend/app/models.py` ä¸­çš„æ¨¡å‹åï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1.  **ç”Ÿæˆè¿ç§»è„šæœ¬**
    ```bash
    # åœ¨ backend ç›®å½•ä¸‹æ‰§è¡Œ
    alembic revision --autogenerate -m "ä½ çš„è¿ç§»æè¿°"
    ```
    ä¾‹å¦‚: `alembic revision --autogenerate -m "add_user_age_column"`

2.  **åº”ç”¨è¿ç§»**
    æ­¤å‘½ä»¤ä¼šå°†æ•°æ®åº“ç»“æ„æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚
    ```bash
    # åœ¨ backend ç›®å½•ä¸‹æ‰§è¡Œ
    alembic upgrade head
    ```
    > **æ³¨æ„**: `docker-compose up` å‘½ä»¤ä¼šè‡ªåŠ¨æ‰§è¡Œ `alembic upgrade head`ã€‚

## ğŸ“œ å¯ç”¨è„šæœ¬

### åç«¯ (`backend` ç›®å½•)
- `uvicorn app.api.main:app`: å¯åŠ¨æœåŠ¡ã€‚
- `pytest`: è¿è¡Œæµ‹è¯•ã€‚
- `alembic ...`: æ•°æ®åº“è¿ç§»ç›¸å…³å‘½ä»¤ã€‚

### å‰ç«¯ (`frontend` ç›®å½•)
- `pnpm dev`: å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚
- `pnpm build`: æ„å»ºç”Ÿäº§ç‰ˆæœ¬ã€‚
- `pnpm test:unit`: è¿è¡Œå•å…ƒæµ‹è¯•ã€‚
- `pnpm test:e2e`: è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚
- `pnpm lint`: æ£€æŸ¥ä»£ç æ ¼å¼ã€‚